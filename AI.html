<!DOCTYPE html>
<html>

	<head>
		<meta name="viewport" content="width=device-width, intial-scale=1">

		<style>
			body, html {
				height: 50%;
				margin: 0 auto;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
				align-items: center;
				max-width: 625px;
				text-align: center;
            }

			/* Cool AI Bot Background Vid */
			.bg2 {
				position: absolute;
				top: 0;
				right: 0;
				z-index: -1;
				min-height: 100vh;
			}

			@media (min-aspect-ratio: 16/9) {
				.bg2 {
					width: 100%;
					height: auto;
				}
			}
			@media (max-aspect-ratio: 16/9) {
				.bg2 {
					width: auto;
					height: 100%;
				}
			}

			/* Responsiveness: Smartphones and other devices */
			/* Small phones, tablets, large smartphones */
			@media (max-width: 768px) {
				nav {
					height: 68px;
					color: whitesmoke;
				}

				h1 {
					font-size: 12px;
					text-align: center;
				}

				.p1 {
					font-family: "Gill Sans", sans-serif;
					text-align: center;
					font-size: 12px;
				}

				.queryPrompt {
					font-family: "Fantasy", Copperplate, Papyris;
					text-align: center;
					color: whitesmoke;
					font-size: 8px;
				}
			}

			@media (max-width: 1366px) {
				nav {
					height: 68px;
					color: whitesmoke;
				}

				h1 {
					font-size: 16px;
					text-align: center;
				}

				.p1 {
					font-family: "Gill Sans", sans-serif;
					text-align: center;
					font-size: 8px;
				}

				.queryPrompt {
					font-family: "Fantasy", Copperplate, Papyris;
					text-align: center;
					color: whitesmoke;
					font-size: 12px;
				}
			}


            /* .bg { */
              /* The image used */
              /* background: url("https://sallysbakingaddiction.com/wp-content/uploads/2013/05/classic-chocolate-chip-cookies.jpg"); 
		

              /* Full height */
              /* height: 100%; */

              /* Centers and scales my image smooth and professional */
              /*background-position: center;
              background-repeat: no-repeat;
              background-size: cover;
            }*/

			/* All Font (particuraly the answers to query). */
			font {
				color: whitesmoke;
				font-size: x-large;
			}

			/* Style for my header */
			.h1 {
				font-size: xx-large;
				font-family: "san-serif", Playfair Display, Bodoni;
				text-align: center;
				padding: 7px;
    background: linear-gradient(to right, gold, #71713a, #544478, silver, whitesmoke, gold, #71713a, #544478, silver, whitesmoke);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
			}


			/* First paragraph style */
			.p1 {
				min-height: 100vh;
				font-family: "Gill Sans", sans-serif;
				text-align: center;
				color: whitesmoke;
				font-size: 24px;
				display: flex;
				flex-direction: column;
				align-items: center;
				max-width: 625px;
				margin: 0 auto;
			}

			.para {
				font-size: 24px;
				margin-top: 2px;
				margin-bottom: 16px;
				color: whitesmoke;
			}


			/* My query prompt style */
			.queryPrompt {
				font-size: 24px;
				font-family: "Fantasy", Copperplate, Papyris;
				text-align: center;
				color: whitesmoke;
			}


			/* Query input field and button alignment */
			.queryIB {
				display: flex;
  				flex-direction: row;
  				justify-content: center;
				align-items: center;
				gap: 5px;
    			overflow: hidden;
				color: whitesmoke;
			}


			/* End-user query input field */
			.input {
				font-family: "Ramaraja", Helvetica;
				display: flex;
  				text-align: center;
				width: fit-content;
    			min-width: 150px;
				max-width: 625px;
			}


			/* My AI button style */
			button {
				background-color: gold;
				color: white;
				border: none;
				border-radius: 50%;
				height: 25px;
				width: 25px;
				cursor: pointer;
			}
		</style>
	</head>



	<body>

		<video autoplay loop muted plays-inline class="bg2">
			<source src="./aiBot.mov">
		</video>

		<!-- For association with my background style -->
    	<!-- <div class="bg"></div> -->

      
		<!-- My header -->  
		<h1 class="h1">My First AI Chat Bot</h1>

		
		<!-- My first paragraph -->
		<p class="<p class="p1 para" style="color:whitesmoke">
			<a href="https://supercodingninja.github.io/" target=‚Äù_blank‚Äù><b style="color: gold; font-size: xx-large;"><u>"HELLO, WORLD!"</u></b></a> (üëàüèøCheck out first website & my AI Chatbot repository just by clicking the hyperlinks üëáüèø) This is my first AI chat box.  I have developed dialogue prompts before- even multiple choice <a href="https://supercodingninja.github.io/WhoIsOutside/" target=‚Äù_blank‚Äù>game</a>- and I've even used API (Application Programming Interface).  I am familiar with integrating tools and technologies into a website (such as ChatGPT). Still, I had never fully coded my very own Chat Bot until Mr. David Bragg, founder of <a href="https://frontendsimplified.com/" target=‚Äù_blank‚Äù>Frontend Simplified</a> showed me how, and I highly recommend his courses!
		</p>


		<!-- My inquisition leading user to query search engine -->
		<h3 class="queryPrompt">
			So, without further ado, hello üëãüèø my name is <a href="https://github.com/supercodingninja" target=‚Äù_blank‚Äù>Frederick</a> üë®üèæ‚Äçüéì How can I help you today?
		</h3>


		<div class="queryIB">
			<!-- Simple form field for user to enter query. -->
			<input type="text" id="qtxt" onkeypress="this.style.width = (this.value.length) + 'ch';" placeholder='Type a word or sentence' class="input" onload="myFunction()"></input>


			<!-- This button is designed for the end user to submit the desired query (stand back and watch the magic happen and be in aweüë®üèæ‚Äçüéì) -->
			<button>‚¨Ü</button>
		</div>



		<script>

const handleMessage = async () => {
const input = document.querySelector("input"),
  button = document.querySelector("button"),
  message = input.value.trim();

if (!message) return;

input.insertAdjacentHTML(
"beforebegin",
`<p data-user="true">${message}</p>`
);
input.value = "";

try {
const { reply, imageUrl } = await fetch(
    "https://backend.fesinstitute.com/api/public/chat",
    {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message, uid: "YvUJTOs94cNgO5U7HSm4OkDJVmG3" }),
    }
).then((r) => r.json());

const formattedText = reply
    .replace(/###\s+(.*)/g, "<h3>$1</h3>")
    .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
    .replace(/^\s*-\s+(.+)/gm, "<li>$1</li>")
    .replace(/^\s*\d+\.\s+(.+)/gm, "<li>$1</li>");

input.insertAdjacentHTML(
    "beforebegin",
    `<div>${formattedText}` +
    (imageUrl
        ? `<img src="${imageUrl}"></div>`
        : "</div>")
);
} catch {
input.insertAdjacentHTML(
    "beforebegin",
    `<p>Bot: Something went wrong!</p>`
);
}
};

document.querySelector("button").onclick = handleMessage;

document.querySelector("input").addEventListener("keypress", (e) => {
if (e.key === "Enter") {
e.preventDefault();
handleMessage();
}
});


// 'ch' unit referenced from John's answer on StackOverflow (https://stackoverflow.com/questions/65575027/how-to-set-html-input-tag-width-fit-content-in-css). John's profile (profile: https://stackoverflow.com/users/11111119/john). Going forward, I I rather write all of this code in separate files (.html, .css, .js, etc.), and honestly, I think I would prefer to use the span tag to allow more versatility and functionality, but I just desired something simple to accomplish a minimum viable product. //

			function myFunction() {
  document.getElementById("qtxt").style.width = (qtxt.value.length) + 'ch';
			}

			window.onload = myFunction();
		</script>
	</body>
</html>
